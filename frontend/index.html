<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhiskerWorthy | Dog Diet Questionnaire</title>
    <link rel="stylesheet" href="./public/style.css">
</head>
<body>
    <header class="hero">
        <!-- Use origami banner from assets for a modern, clean header image -->
        <img src="./public/assets/Banner_origami_habitat.png" alt="WhiskerWorthy" class="header-logo">
        <h1>WhiskerWorthy</h1>
        <p class="intro-text"> Learn more about your dog’s biology through your veterinarian with WhiskerWorthy's help.</p>
        <p>Answer 3 quick questions to get ready for your next vet visit. We’ll give you questions to ask your veterinarian.</p>
        <p>You’re welcome to answer more questions anytime. Sharing a bit more helps researchers learn about your dog. Together with other owners, this can help improve care for all dogs.</p>
        <p>Please answer more now or or in a month or more. If now, click the next button. If you're returning, scroll to questions to update us.</p>
        <button type="button" id="nextButton">FUTURE "Click for weight++ questions" FUTURE</button>
    </header>

    <main>
        <!-- Removed card section -->
        <!-- <section class="card">
        <h2>Dog Biology Questions</h2> 
        <p>More breeds and questions about traits and health will be added in future updates.</p> <p>Please answer 3 questions about your dog. We’ll then suggest 3 questions you can ask your veterinarian.</p> 
        <!-- In-page click-to-unhide section --> 
         <details> <summary> Don’t see your dog’s breed? Choose “Other,” including mixed breeds. 
            <br> 
            <em>Curious about “pit bulls”? Click here ▸</em> 
                </summary> <p> If your dog is often called a “pit bull,” please choose <strong>American Staffordshire Terrier</strong>. You can also use adult size to choose between these:   </p> 
                <ul> 
                    <li>American Staffordshire Terrier: about 40–70 lb</li> 
                    <li>Staffordshire Bull Terrier:     about 25–40 lb</li> 
                </ul> 
                <button type="button" id="nextButton">FUTURE "Click for weight range as kg." FUTURE</button>
        </details>

<!--Many tries to vertically-orient page - banner & intro above form, above AI results - no card, etc.-->
            <form id="dogQuestionnaireForm" novalidate>
                <label for="breed_name">Breed Name:</label>
                <!-- Searchable breed input backed by a datalist populated from the DB -->
                <!-- Critical: `id="breed_name"` and `name="breed_name_AKC"` must match JS and backend form fields -->
                <input
                    type="text"
                    id="breed_name"
                    name="breed_name_AKC"
                    list="breed_list"
                    required
                    placeholder="Start typing to search the 8 AKC breeds (e.g., Labrador Retriever)"
                >
            <!--The DB "breed..." table to be the source, when accessible. Then list on lines 52-62 should be the backup. (My ultimate goal is for the list to expand, as we add breeds as records in that table.) When the backend database tables are accessible, will the "breed..." table's breed name list be the source? 
            When I click the form's "Submit..." button to trigger the AI responses, I get a warning or error that "Tenant or user not found". -->
                <!-- Datalist element receives <option> entries from frontend/public/main.js -->
                <datalist id="breed_list">
                    <option value="Other">Other (mixed, unsure)</option>
                    <option value="American Staffordshire Terrier">American Staffordshire Terrier</option>
                    <option value="Beagle">Beagle</option>
                    <option value="Chihuahua">Chihuahua</option>
                    <option value="German Shepherd">German Shepherd</option>
                    <option value="Golden Retriever">Golden Retriever</option>
                    <option value="Labrador Retriever">Labrador Retriever</option>
                    <option value="Shih Tzu">Shih Tzu</option>
                    <option value="Staffordshire Bull Terrier">Staffordshire Bull Terrier</option>
                </datalist>
                <div class="helper-text">Choose 1 of 8 listed AKC breed names or "Other (mixed, unsure)".</div>

                <label for="age_years">Dog's Age (years):</label>
                <input
                    type="number"
                    id="age_years"
                    name="age_years_preReg"
                    step="0.1"
                    min="0"
                    max="30"
                    required
                    placeholder="e.g., 3.5 for three and a half years"
                >
                <div class="helper-text">Use one decimal place if needed (e.g., 3.5).</div>

                <fieldset>
                    <legend>Diet-Related Health Status</legend>
                    <div class="helper-text">Mark all that apply. If none apply, mark "None".</div>

                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="status_none" name="status_dietRelat_preReg" value="none">
                            <label for="status_none">None - No special dietary needs or health issues</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="status_puppy" name="status_dietRelat_preReg" value="puppy">
                            <label for="status_puppy">Puppy - Growing dog (usually under 1 year)</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="status_elderly" name="status_dietRelat_preReg" value="elderly">
                            <label for="status_elderly">Elderly/Senior - Older dog with age-related needs</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="status_pregnant" name="status_dietRelat_preReg" value="pregnant">
                            <label for="status_pregnant">Pregnant - Expecting mother dog</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="status_allergy" name="status_dietRelat_preReg" value="allergy">
                            <label for="status_allergy">Allergy - Food or environmental allergies</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="status_other" name="status_dietRelat_preReg" value="other_health">
                            <label for="status_other">Other Health Issues - Other medical conditions</label>
                        </div>
                    </div>
                </fieldset>

                <button type="submit">Submit Answers</button>
                <!-- AI-generated vet questions will be rendered here after submission -->
                <div id="aiQuestionsResult" class="ai-results" role="region" aria-live="polite"></div>
            </form>
            <p>After clicking "Submit...", AI-generated vet questions will appear here.</p>
            <br>
            <button type="button" id="nextButton">FUTURE "Click for weight++ questions" FUTURE</button>
        </section>
        <br>
        <img
            src=".\public\assets\Gemini_Banner_Center.png"
            alt="WhiskerWorthy Divider"
            class="banner-divider"
        >

        <!--
        <section class="card">
            <h2>Team Member Admin Panel</h2>
            <p class="admin-info">For project team members only - update breed information in the database.</p>

            <form id="adminUpdateForm" novalidate>
                <label for="search_field">Search By:</label>
                <select id="search_field" name="search_field" required>
                    <option value="breed_name_AKC">Breed Name (AKC)</option>
                    <option value="dogapi_id">Dog API ID</option>
                </select>
                <div class="helper-text">Choose how you want to identify the breed to update.</div>

                <label for="search_value">Search Value:</label>
                <input
                    type="text"
                    id="search_value"
                    name="search_value"
                    required
                    placeholder="Enter breed name or Dog API ID"
                >
                <div class="helper-text">Enter the breed name or ID to find the record you want to update.</div>

                <fieldset>
                    <legend>Update Fields (fill only what you want to change)</legend>

                    <label for="admin_breed_otherNames">Other Breed Names:</label>
                    <input
                        type="text"
                        id="admin_breed_otherNames"
                        name="breed_otherNames"
                        placeholder="Separate multiple names with semicolon"
                    >

                    <label for="admin_breed_group_AKC">Breed Group (AKC):</label>
                    <input
                        type="text"
                        id="admin_breed_group_AKC"
                        name="breed_group_AKC"
                        placeholder="e.g., sporting, hound, working, terrier"
                    >

                    <label for="admin_breed_size_categ_AKC">Size Category (AKC):</label>
                    <select id="admin_breed_size_categ_AKC" name="breed_size_categ_AKC">
                        <option value="">-- No Change --</option>
                        <option value="small">Small</option>
                        <option value="medium">Medium</option>
                        <option value="large">Large</option>
                        <option value="extra large">Extra Large</option>
                    </select>

                    <label for="admin_breed_life_expect_yrs">Life Expectancy (years):</label>
                    <input
                        type="number"
                        id="admin_breed_life_expect_yrs"
                        name="breed_life_expect_yrs"
                        step="0.1"
                        min="0"
                        max="30"
                        placeholder="e.g., 12.5"
                    >

                    <label for="admin_listed_DogDiet_MVP">Listed in DogDiet MVP:</label>
                    <select id="admin_listed_DogDiet_MVP" name="listed_DogDiet_MVP">
                        <option value="">-- No Change --</option>
                        <option value="Y">Y - Yes, include in MVP</option>
                        <option value="N">N - No, not yet in MVP</option>
                    </select>
                </fieldset>

                <button type="submit">Update Breed Information</button>
            </form>
        </section>
        -->
    </main>

    <script src="./public/main.js"></script>
    <script>
                    async function populateBreedList() {
                        try {
                            const response = await fetch('/breeds');
                            if (!response.ok) {
                                throw new Error('Failed to fetch breeds from the database.');
                            }
                            const breeds = await response.json();
                            const breedList = document.getElementById('breed_list');
                            breedList.innerHTML = '';
                            breeds.forEach(breed => {
                                const option = document.createElement('option');
                                option.value = breed;
                                breedList.appendChild(option);
                            });
                        } catch (error) {
                            console.error('Error fetching breeds:', error);
                        }
                    }

                    document.addEventListener('DOMContentLoaded', populateBreedList);
                </script>
</body>
</html>